!function(){"use strict";function t(){const t=document.getElementById("chatWidget");if(!t)return;const e=t.querySelector(".chat-header");if(!e)return;e.setAttribute("draggable","false"),t.setAttribute("draggable","false");const n=t=>(t.preventDefault(),!1);function o(t){if(!t)return!1;if(t.hasAttribute("data-no-drag"))return!0;let n=t.parentElement;for(;n&&n!==e;){if(n.hasAttribute("data-no-drag"))return!0;n=n.parentElement}return!1}e.addEventListener("dragstart",n),t.addEventListener("dragstart",n);let i=!1,r=0,a=0,s=0,u=0,c=0,d=0;const l=8;function m(e,n){i=!0,t.classList.add("chat-widget--dragging");const o=t.getBoundingClientRect();r=e,a=n,s=o.left,u=o.top,c=o.width,d=o.height,t.style.left=o.left+"px",t.style.top=o.top+"px",t.style.right="auto",t.style.bottom="auto",t.dataset.prevTransition=t.style.transition||"",t.style.transition="none"}function v(e,n){if(!i)return;let o=s+(e-r),m=u+(n-a);const v=window.innerWidth,f=window.innerHeight,h=l,g=v-c-l,p=function(){let t=l;const e=document.querySelector(".header");if(e){const n=e.getBoundingClientRect(),o=window.getComputedStyle(e);"fixed"!==o.position&&"sticky"!==o.position||(t=Math.max(t,n.bottom+l))}return t}(),E=f-d-l;o=g<h?h:Math.min(Math.max(h,o),g),m=E<p?p:Math.min(Math.max(p,m),E),t.style.left=o+"px",t.style.top=m+"px"}function f(){i&&(i=!1,t.classList.remove("chat-widget--dragging"),void 0!==t.dataset.prevTransition&&(t.style.transition=t.dataset.prevTransition,delete t.dataset.prevTransition))}function h(t){t.preventDefault(),v(t.clientX,t.clientY)}function g(){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",g),f()}function p(t){if(!t.touches||0===t.touches.length)return;const e=t.touches[0];t.preventDefault(),v(e.clientX,e.clientY)}function E(){document.removeEventListener("touchmove",p),document.removeEventListener("touchend",E),document.removeEventListener("touchcancel",E),f()}e.addEventListener("mousedown",(function(t){0===t.button&&(o(t.target)||(t.preventDefault(),m(t.clientX,t.clientY),document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)))})),e.addEventListener("touchstart",(function(t){if(!t.touches||0===t.touches.length)return;const e=t.touches[0];o(t.target)||(t.preventDefault(),m(e.clientX,e.clientY),document.addEventListener("touchmove",p,{passive:!1}),document.addEventListener("touchend",E),document.addEventListener("touchcancel",E))}),{passive:!1})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}();
